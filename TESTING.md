# 챗봇 테스트 가이드

이 문서는 챗봇의 정확도와 Hallucination 방지 기능을 검증하기 위한 테스트 시나리오를 제공합니다.

## 테스트 환경 준비

1. 데이터 업로드 완료: `npm run upload`
2. 개발 서버 실행: `npm run dev`
3. 브라우저 개발자 도구 열기 (F12) - API 응답 확인용

## 테스트 시나리오

### 1. 정확한 질문 매칭 (High Confidence)

이 질문들은 **신뢰도 90% 이상**으로 정확한 답변을 반환해야 합니다.

#### 테스트 1-1: 지원 자격
```
질문: 바이브코딩 인턴 지원자격이 어떻게 되나요?
기대 답변: "바이브코딩 인턴 지원에는 별도의 자격요건이 없습니다..."
기대 신뢰도: 95%+
```

#### 테스트 1-2: 선발 절차
```
질문: 바이브코딩 인턴 선발절차를 알려주세요
기대 답변: "바이브코딩 인턴 선발절차는..."
기대 신뢰도: 95%+
```

#### 테스트 1-3: 활동 기간
```
질문: 바이브코딩 인턴 활동기간은 얼마나 되나요?
기대 답변: "바이브코딩 인턴 활동기간은 매년..."
기대 신뢰도: 95%+
```

### 2. 유사한 질문 (Semantic Search)

이 질문들은 **신뢰도 75-90%**로 유사한 답변을 찾아야 합니다.

#### 테스트 2-1: 다른 표현으로 질문
```
질문: 인턴에 지원하려면 무슨 조건이 필요해요?
기대 동작: "지원자격" 관련 답변 반환
기대 신뢰도: 75-90%
```

#### 테스트 2-2: 축약된 질문
```
질문: 인턴 선발은 어떻게 되나요?
기대 동작: "선발절차" 관련 답변 반환
기대 신뢰도: 75-90%
```

#### 테스트 2-3: 순서 변경
```
질문: 얼마나 인턴 활동을 하나요?
기대 동작: "활동기간" 관련 답변 반환
기대 신뢰도: 75-90%
```

### 3. Hallucination 방지 테스트 (Low Confidence)

이 질문들은 **신뢰도 75% 미만**으로 "정확한 답변을 제공할 수 없습니다" 메시지를 반환해야 합니다.

#### 테스트 3-1: 완전히 관련 없는 질문
```
질문: 오늘 날씨가 어때요?
기대 답변: "죄송합니다. 정확한 답변을 제공할 수 없습니다..."
기대 신뢰도: < 75%
```

#### 테스트 3-2: 데이터에 없는 정보
```
질문: 바이브코딩 인턴 급여는 얼마인가요?
기대 답변: "죄송합니다. 정확한 답변을 제공할 수 없습니다..."
기대 신뢰도: < 75%
```

#### 테스트 3-3: 애매한 질문
```
질문: 그거 있잖아요
기대 답변: "죄송합니다. 정확한 답변을 제공할 수 없습니다..."
기대 신뢰도: < 75%
```

### 4. Edge Cases

#### 테스트 4-1: 빈 입력
```
질문:
기대 동작: 전송 버튼 비활성화 (UI에서 차단)
```

#### 테스트 4-2: 공백만 입력
```
질문: "     "
기대 동작: 전송 버튼 비활성화 또는 에러 메시지
```

#### 테스트 4-3: 매우 긴 질문
```
질문: 바이브코딩 인턴 지원자격이 어떻게 되나요? 바이브코딩 인턴 지원자격이 어떻게 되나요? ... (200자+)
기대 동작: 정상 처리 또는 적절한 에러 메시지
```

## 성능 테스트

### 응답 시간 측정

브라우저 개발자 도구의 Network 탭에서 `/api/chat` 요청 시간 확인:

- **목표**: 5초 이내 응답
- **평균 시간**:
  - Gemini 임베딩 생성: 1-2초
  - Pinecone 검색: 0.5-1초
  - 총 응답: 2-3초

### 동시 요청 테스트

여러 브라우저 탭에서 동시에 질문 전송:
- **기대**: 모든 요청이 독립적으로 처리됨
- **오류 없이 완료되어야 함**

## API 응답 형식 검증

### 성공 응답 (신뢰도 ≥ 0.75)
```json
{
  "answer": "실제 답변 내용...",
  "source": "매칭된 원본 질문",
  "confidence": 0.92
}
```

### 실패 응답 (신뢰도 < 0.75)
```json
{
  "answer": "죄송합니다. 정확한 답변을 제공할 수 없습니다...",
  "source": null,
  "confidence": 0.65
}
```

### 에러 응답
```json
{
  "error": "질문을 입력해주세요."
}
```

## UI 동작 확인

### 체크리스트
- [ ] 질문 입력 시 로딩 인디케이터 표시
- [ ] 답변 수신 시 신뢰도 바 표시 (초록색: ≥75%, 노란색: <75%)
- [ ] 매칭된 원본 질문 표시 (있는 경우)
- [ ] 스크롤이 자동으로 최신 메시지로 이동
- [ ] 로딩 중 입력창 비활성화
- [ ] 로딩 중 전송 버튼 비활성화

## 배포 환경 테스트

Vercel 배포 후 다음 사항 확인:

### 환경 변수 체크
```bash
# Vercel Dashboard > Settings > Environment Variables
PINECONE_API_KEY ✓
PINECONE_INDEX_NAME ✓
GEMINI_API_KEY ✓
```

### 프로덕션 테스트
1. 배포 URL 접속
2. 위의 모든 시나리오 재테스트
3. 브라우저 콘솔에서 에러 확인

## 보고서 작성 (선택)

테스트 결과를 다음과 같이 정리하면 좋습니다:

```markdown
# 챗봇 테스트 결과

## 환경
- 테스트 일시: 2025-11-15
- 환경: 로컬 / Vercel 프로덕션
- 데이터: 13개 Q&A 쌍

## 정확도
- 정확한 질문 매칭: 3/3 성공 (100%)
- 유사 질문 검색: 3/3 성공 (100%)
- Hallucination 방지: 3/3 성공 (100%)

## 성능
- 평균 응답 시간: 2.5초
- 최대 응답 시간: 4.2초
- 에러율: 0%

## 이슈
- 없음
```

## 추가 테스트 아이디어

1. **언어 혼용 테스트**:
   ```
   질문: 바이브코딩 intern qualification?
   ```

2. **오타 포함 질문**:
   ```
   질문: 바이브코딩 인턴 지웡자격이 어떻게 되나요?
   ```

3. **대소문자 구분**:
   ```
   질문: VIBESOFT 인턴 지원자격
   ```

---

**테스트 소요 시간**: 약 15분

모든 테스트를 통과하면 프로덕션 배포 준비 완료!
